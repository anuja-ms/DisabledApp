{% load static %}
{% include "DisabledPerson/Header.html" %}
<style>
    .block-20{
        width: 375px;
    }
    </style>
<section class="ftco-section">
    <div class="container">
      <div class="row justify-content-center pb-5 mb-3">
        <div class="col-md-7 heading-section text-center ftco-animate">
          <h2>Latest news from our blog</h2>
          <span class="subheading">News &amp; Blog</span>
        </div>
      </div>
      <div class="row">
      <div class="col-lg-4">
      <select name="categoryid" id="categoryid" class="form-control">
        <option value="">Select Category</option>
        {% for c in category %}
        <option value="{{c.categoryid}}">{{c.categoryname}}</option>
        {% endfor %}
      </select>
      </div>
      <div class="col-lg-4">
      <select name="districtid" id="districtid" class="form-control">
        <option value="">Select District</option>
        {% for d in districts %}
        <option value="{{d.district_id}}">{{d.district_name}}</option>
        {% endfor %}
      </select>
      </div>
    <div class="col-lg-4">
    <select name="locationid" id="locationid" class="form-control">
      <option value="">Select Location</option>
      {% for l in location %}
      <option value="{{l.locationid}}">{{l.locationname}}</option>
      {% endfor %}
    </select>
  </div>
    </div>
    <br>
   
      <div class="row d-flex">
        {% for i in cat %}
        <div class="col-md-4 d-flex ftco-animate">
          <div class="blog-entry align-self-stretch">
            <a href="{% url 'viewmoreinstitution' id=i.institutionid %}" class="block-20 rounded" style="background-image: url({{i.institutionimage.url}});">
            </a>
            <div class="text mt-3">
                <div class="meta mb-2">
                <div><a href="#">{{ i.institutionname }}</a></div>
                <div><a href="#">{{ i.websiteurl }}</a></div>
                <!-- <div><a href="#" class="meta-chat"><span class="fa fa-comment"></span> 3</a></div> -->
              </div>
              <h3 class="heading"><a href="#">{{ i.institutiondesc }}</a></h3>
            </div>
          </div>
        </div>
        
        {% endfor %}
      </div>
    </div>
  </section>
  {% include "DisabledPerson/Footer.html" %}
  <script src="{% static 'jquery.min.js' %}"></script>
<script>
$(document).ready(function () {
    alert('hai!');
    $.ajaxSetup({
        headers: { 'X-CSRFToken': '{{ csrf_token }}' }
    });
    $('#categoryid, #districtid, #locationid').change(function () {
        var categoryid = $('#categoryid').val();
        var districtid = $('#districtid').val();
        var locationid = $('#locationid').val();
        //alert("categoryid = " + ageid + " " +gender);
        $.ajax({
            type: "POST",
            url: '{% url "fillinstitution" %}',
            data: {
                cid: categoryid,
                did: districtid,
                lid: districtid,
            },
            dataType: "json",
            success: function (data) {
                $('#institution').empty();
                $.each(data, function (key, val) {
                    var row = '<div class="col-sm-6 col-md-4 col-lg-3 mb-4">' +
                        '<div class="box">' +
                        '<a href="">' +
                        '<div class="img-box">' +
                        '<img src="/images/' + val.institutionimage + '" alt="Institution Image" class="img-fluid">' +
                        '</div>' +
                        '<div class="detail-box text-center mt-2">' +
                        '<h5>' + val.institutionname + '</h5>' +
                        '<p class="text-muted">Price: $' + val.institutiondesc + '</p>' +
                        '</div>' +
                        '</a>' +
                        '</div>' +
                        '</div>';
                    $('#institutionid').append(row);
                });
            },
        });
    });
});
</script>

