{% load static %}
{% include "Admin/Header.html" %}

<style>
  .compact-table {
    font-size: 14px; /* Better readability */
  }
  .compact-table th,
  .compact-table td {
    padding: 8px;
    text-align: center;
    vertical-align: middle;
  }
  .compact-table img {
    width: 60px;
    height: 40px;
    object-fit: cover;
    border-radius: 5px;
  }
  .compact-table button {
    padding: 5px 8px;
    font-size: 12px;
  }
  .card {
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
  .card-body {
    padding: 15px;
  }
</style>

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title text-center mb-4">Request Details</h4>
          <div class="table-responsive">
            <table class="table table-striped table-bordered compact-table">
              <thead class="table-dark">
                <tr>
                  <th>SlNo</th>
                  <th>Student Name</th>
                  <th>Equipment Name</th>
                  <th>Count</th>
                  <th>Total Amount</th>
                  <th>Email</th>
                  <th>Contact</th>
                  <th>Requested Date</th>
                  <th>Address</th>
                  <th>Location</th>
                  <th>ID Proof</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for r in requests %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{{ r.personid.personname }}</td>
                  <td>{{ r.equipmentid.equipmentname }}</td>
                  <td>{{ r.count }}</td>
                  <td>{{ r.totalamount }}</td>
                  <td>{{ r.personid.email }}</td>
                  <td>{{ r.personid.contactno }}</td>
                  <td>{{ r.requesteddate }}</td>
                  <td>{{ r.personid.address }}</td>
                  <td>{{ r.personid.locationid.locationname }}</td>
                  <td>
                    {% if r.personid.idproof %}
                      <img src="{{ r.personid.idproof.url }}" alt="ID Proof">
                    {% else %}
                      <span class="text-muted">No Image</span>
                    {% endif %}
                  </td>
                  <td>
                    <span class="badge {% if r.status == 'Accepted' %} bg-success {% elif r.status == 'Rejected' %} bg-danger {% else %} bg-warning {% endif %}">
                      {{ r.status }}
                    </span>
                  </td>
                  <td>
                    <a href="{% url 'requestaccept' id=r.requestid %}" class="btn btn-success btn-sm">Accept</a>
                    <a href="{% url 'requestreject' id=r.requestid %}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to reject this request?')">Reject</a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

{% include "Admin/Footer.html" %}



